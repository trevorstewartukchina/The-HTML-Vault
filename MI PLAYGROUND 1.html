<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>How I Learn Best â€” Gardner Kids (Complete)</title>
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&family=Fredoka:wght@600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
:root{
  --ink:#0f172a; --muted:#64748b; --glass:#ffffffcc;
  --pri:#7c3aed; --sec:#00a2ff;
  --rad:20px; --shadow:0 12px 30px #0000001a;
  --L:#f2e7ff; --M:#e3f2fd; --MU:#e6fffb; --S:#fff7ed; --B:#ecfccb; --E:#fef9c3; --I:#f3e8ff; --N:#e8f5e9;
  --gutter:16px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  font-family:'Quicksand',system-ui,Segoe UI,Arial;
  overflow-x:hidden;
  background:
    radial-gradient(70vw 70vw at 10% -20%, #e0f2fe 0%, transparent 60%),
    radial-gradient(70vw 70vw at 110% 10%, #ede9fe 0%, transparent 60%),
    linear-gradient(120deg, #eef2ff, #e0f7fa);
}
.blob{position:fixed; width:45vw; height:45vw; border-radius:50%; filter:blur(50px); opacity:.45; pointer-events:none; z-index:-1; animation:float 16s ease-in-out infinite alternate;}
.blob.b1{background:#c7d2fe; top:-10vh; left:-10vw}
.blob.b2{background:#f5d0fe; bottom:-15vh; right:-10vw; animation-delay:2s}
@keyframes float{0%{transform:translate(0,0) scale(1)}100%{transform:translate(3vw,-2vh) scale(1.08)}}

.topbar{position:sticky; top:0; z-index:50; backdrop-filter:blur(10px); background:var(--glass); border-bottom:1px solid #e2e8f0}
.topbar-inner{max-width:1100px; margin:0 auto; padding:8px var(--gutter); display:flex; gap:12px; align-items:center}
.brand{font-family:'Fredoka'; font-weight:800; color:var(--pri); font-size:1.15rem}
.badges{display:flex; gap:8px; flex-wrap:wrap}
.badge{background:#ecfeff; color:#155e75; border:1px solid #a5f3fc; border-radius:999px; padding:.2em .6em; font-weight:800}
.top-right{margin-left:auto; display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.avatar-pill{display:flex; align-items:center; gap:8px; background:#ffffff; border:1px solid #e2e8f0; border-radius:999px; padding:2px 10px; box-shadow:0 6px 16px #00000010}
.avatar-emoji{font-size:28px; line-height:1}
.coin-pill,.tts-pill{display:flex; align-items:center; gap:6px; background:#fff; border:1px solid #e2e8f0; border-radius:999px; padding:2px 10px; box-shadow:0 6px 16px #00000010}
.coin{font-size:18px}

.wrap{max-width:1100px; margin:0 auto; padding:16px var(--gutter)}
.panel{
  background:linear-gradient(180deg, var(--glass), #fff);
  border:1px solid #e2e8f0; border-radius:var(--rad);
  box-shadow:var(--shadow); padding:22px;
  position:relative; overflow:hidden;
}
.grid{display:grid; gap:22px}
.grid.two{grid-template-columns:1fr 1fr}
@media (max-width:980px){.grid.two{grid-template-columns:1fr}}

input,select{
  width:100%; font-size:1rem;
  padding:.7em .85em; border-radius:12px; border:1px solid #cbd5e1; background:#fff;
}
input:focus, select:focus{outline:2px solid #a78bfa55; border-color:#a78bfa; box-shadow:0 0 0 4px #a78bfa22}

.avatar{display:grid; grid-template-columns:repeat(auto-fit, minmax(110px, 1fr)); gap:18px}
.avatar input{display:none}
.tile{display:flex; align-items:center; justify-content:center; aspect-ratio:1/1; font-size:80px; background:#fff; border:2px solid #e5e7eb; border-radius:18px; box-shadow:0 10px 22px #00000014; transition:.12s transform,.12s box-shadow,.12s border-color; user-select:none}
.tile:hover{transform:translateY(-2px); box-shadow:0 16px 32px #00000018}
.avatar input:checked + .tile{border-color:var(--pri); box-shadow:0 0 0 4px #7c3aed22, 0 16px 34px #00000018}

.stage{position:relative; overflow:hidden; border-radius:var(--rad); box-shadow:var(--shadow); background:#fff; border:1px solid #e2e8f0}
.stage-head{display:flex; align-items:center; gap:10px; padding:12px 14px; background:linear-gradient(90deg, #ffffffaa, #eef2ffaa); border-bottom:1px solid #e2e8f0; flex-wrap:wrap; row-gap:8px}
.domainChip{display:inline-flex;align-items:center;gap:.5em;padding:.35em .8em;border-radius:999px;font-weight:800}
.progress{height:8px; background:#e2e8f0; border-radius:8px; overflow:hidden}
.progress>div{height:100%; background:linear-gradient(90deg, var(--pri), var(--sec)); width:0%}
.qwrap{padding:18px; animation:fade .2s ease}
@keyframes fade{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)}}
.parallax{position:absolute; inset:0; pointer-events:none; overflow:hidden}
.picon{position:absolute; font-size:48px; opacity:.25; animation:drift 10s linear infinite}
@keyframes drift{0%{transform:translateY(0)}100%{transform:translateY(-10px)}}

.qtext{font-weight:800; font-size:1.24rem; margin:.2em 0}
.answers{display:grid; gap:10px; margin-top:8px}
.answers label{display:flex; align-items:center; justify-content:space-between; gap:10px; background:#f8fafc; border:1px solid #e2e8f0; border-radius:14px; padding:.7em .85em; cursor:pointer; transition:.12s transform,.12s box-shadow}
.answers label:hover{transform:translateY(-1px); box-shadow:0 10px 20px #00000010}
.answers input{appearance:none; width:18px; height:18px; border:2px solid #93c5fd; border-radius:50%; position:relative}
.answers input:checked{background:#93c5fd}
.answers input:checked::after{content:""; position:absolute; inset:4px; border-radius:50%; background:#fff}

.mini{margin-top:12px; border:1px dashed #e5e7eb; border-radius:14px; padding:12px; background:#ffffffaa}
.flex{display:flex; gap:10px; align-items:center; flex-wrap:wrap}

.rescard{display:grid; gap:18px; grid-template-columns:1.2fr 1fr}
@media (max-width:900px){.rescard{grid-template-columns:1fr}}
.badge{background:#ecfeff; color:#155e75; border:1px solid #a5f3fc; border-radius:999px; padding:.2em .6em; font-weight:800}

.footer{position:sticky; bottom:0; z-index:40; margin-top:12px; backdrop-filter:blur(10px); background:#ffffffcc; border-top:1px solid #e2e8f0}
.footer-inner{max-width:1100px; margin:0 auto; padding:10px var(--gutter); display:flex; gap:10px; align-items:center}
.btn{background:linear-gradient(90deg, var(--pri), var(--sec)); color:#fff; border:0; border-radius:12px; padding:.75em 1.1em; font-weight:900; cursor:pointer; box-shadow:0 10px 24px #7c3aed2a; transition:.12s transform}
.btn:hover{transform:translateY(-1px)}
.ghost{background:#fff; color:#000; border:1px solid #e2e8f0}

#confetti{position:fixed; inset:0; pointer-events:none}
.coin-float{position:fixed; font-size:24px; pointer-events:none; animation:coinUp .8s ease forwards}
@keyframes coinUp{0%{transform:translateY(0) scale(.9); opacity:.9}100%{transform:translateY(-40px) scale(1.1); opacity:0}}

h1{font-family:'Fredoka','Quicksand'; color:var(--pri); font-size:2rem; margin:.2em 0}
.sub{color:#0ea5e9; font-weight:800}
.small{color:#64748b; font-size:.95rem}
.hidden{display:none}

#intro .actions{display:flex; gap:12px; align-items:center; justify-content:flex-start; flex-wrap:wrap; margin-top:6px}
#intro .actions .right{ margin-left:auto; display:flex; align-items:center; gap:8px }
</style>
</head>
<body>
<div class="blob b1"></div><div class="blob b2"></div>
<canvas id="confetti"></canvas>

<header class="topbar">
  <div class="topbar-inner">
    <div class="brand" data-i18n="brand">ğŸ§  How I Learn Best</div>
    <div class="badges">
      <span class="badge" data-i18n="badge1">Gardner-aligned</span>
      <span class="badge" data-i18n="badge2">Age-adaptive</span>
      <span class="badge" data-i18n="badge3">Save-ready</span>
    </div>
    <div class="top-right">
      <div class="avatar-pill"><span class="avatar-emoji" id="avatarEmoji">ğŸ¦Š</span><span class="small" id="avatarName"></span></div>
      <div class="coin-pill"><span class="coin">ğŸª™</span><b id="coinsTop">0</b></div>
      <div class="tts-pill">
        <button id="ttsToggle" class="btn ghost" style="padding:.45em .7em;font-weight:800">ğŸ”Š <span id="ttsLabel">Read Aloud</span></button>
        <button id="ttsReplay" class="btn ghost" title="Replay" style="padding:.45em .7em">âŸ²</button>
      </div>
      <div class="small" data-i18n="hintKeys">Keys 1â€“4 to answer</div>
    </div>
  </div>
</header>

<main class="wrap">
  <!-- Intro -->
  <section id="intro" class="grid two">
    <div class="panel">
      <h1 data-i18n="pickStyle">Pick your style</h1>
      <div class="sub" data-i18n="bigAvatars">Big avatars, smooth vibes</div>
      <div class="avatar" id="avatarWrap"></div>
    </div>

    <div class="panel">
      <h1 data-i18n="getReady">Get ready</h1>
      <div class="grid" style="gap:18px">
        <div class="grid two" style="gap:18px">
          <div>
            <span class="small" data-i18n="nameLabel">Name</span>
            <input id="name" placeholder="Type your name" autocomplete="name" data-i18n-placeholder="namePH"/>
          </div>
          <div>
            <span class="small" data-i18n="ageLabel">Age (5â€“16)</span>
            <input id="age" type="number" min="5" max="16" placeholder="7"/>
          </div>
        </div>
        <div class="grid two" style="gap:18px">
          <div>
            <span class="small" data-i18n="depthLabel">Depth</span>
            <select id="depth">
              <option value="24" data-i18n="quick">Quick (24Q)</option>
              <option value="40" data-i18n="standard" selected>Standard (40Q)</option>
              <option value="64" data-i18n="deep">Deep (64Q)</option>
            </select>
          </div>
          <div>
            <span class="small" data-i18n="langLabel">Language</span>
            <select id="lang">
              <option value="en">English</option>
              <option value="zh">ç®€ä½“ä¸­æ–‡</option>
              <option value="es">EspaÃ±ol</option>
              <option value="fr">FranÃ§ais</option>
            </select>
          </div>
        </div>
        <div class="actions">
          <button class="btn" id="startBtn" data-i18n="start">Letâ€™s Go! ğŸš€</button>
          <button class="btn ghost" id="resumeBtn" data-i18n="resume">Resume</button>
          <label class="small right"><input type="checkbox" id="teacherView"> <span data-i18n="teacherView">Teacher view</span></label>
        </div>
      </div>
    </div>
  </section>

  <!-- Stage -->
  <section id="stage" class="stage hidden">
    <div class="parallax" id="parallax"></div>
    <div class="stage-head">
      <div id="chip" class="domainChip">ğŸ“š Linguistic</div>
      <div id="qcount" class="small">1/40</div>
      <div style="flex:1; margin:0 10px"><div class="progress"><div id="bar"></div></div></div>
      <div class="avatar-pill"><span class="avatar-emoji" id="avatarEmojiStage">ğŸ¦Š</span><span class="small" id="avatarNameStage"></span></div>
      <div class="coin-pill"><span class="coin">ğŸª™</span><b id="coins">0</b></div>
    </div>
    <div class="qwrap" id="qwrap">
      <div class="qtext" id="qtext">â€¦</div>
      <fieldset class="answers" id="answers"></fieldset>
      <div id="mini" class="mini hidden"></div>
    </div>
  </section>

  <!-- Results -->
  <section id="results" class="panel hidden">
    <h1 data-i18n="greatJob">ğŸ‰ Great job!</h1>
    <div class="flex" style="gap:12px; align-items:center">
      <div class="avatar-pill"><span class="avatar-emoji" id="avatarEmojiRes">ğŸ¦Š</span><span class="small" id="avatarNameRes"></span></div>
      <div class="coin-pill"><span class="coin">ğŸª™</span><b id="coinsRes">0</b></div>
    </div>
    <div class="small" id="summary" style="margin-top:6px"></div>
    <div class="rescard" style="margin-top:6px">
      <div class="panel"><canvas id="radar"></canvas></div>
      <div>
        <div><b data-i18n="topStrengths">Top strengths</b></div>
        <ol id="topList" style="margin-top:.4em"></ol>
        <div class="small" id="quality"></div>
        <div class="small" id="teacherStats"></div>
      </div>
    </div>
    <div style="margin-top:10px"><b data-i18n="missionsTitle">First missions</b></div>
    <div class="badges" id="missions"></div>
    <div class="flex" style="margin-top:10px">
      <button class="btn" id="printBtn" data-i18n="print">ğŸ–¨ï¸ Print / PDF</button>
      <button class="btn" id="csvBtn" data-i18n="csv">ğŸ“„ Export CSV</button>
      <button class="btn" id="jsonBtn" data-i18n="json">ğŸ§© Export JSON</button>
      <button class="btn ghost" id="restartBtn" data-i18n="restart">ğŸ” Restart</button>
    </div>
  </section>
</main>

<footer class="footer">
  <div class="footer-inner">
    <div class="small" id="hint" data-i18n="hintText">Pick the answer that fits you best. No right or wrong!</div>
    <div style="margin-left:auto" class="flex">
      <button class="btn ghost" id="backBtn" data-i18n="back">â¬…ï¸ Back</button>
      <button class="btn ghost" id="skipBtn"><span data-i18n="skip">ğŸŸï¸ Skip</span> (<span id="skips">3</span>)</button>
      <button class="btn" id="saveBtn" data-i18n="save">ğŸ’¾ Save</button>
      <button class="btn" id="nextBtn" data-i18n="next">Next â¡ï¸</button>
    </div>
  </div>
</footer>

<script>
/* ================= I18N ================= */
const I18N = {
  en:{ brand:"ğŸ§  How I Learn Best", badge1:"Gardner-aligned", badge2:"Age-adaptive", badge3:"Save-ready",
    hintKeys:"Keys 1â€“4 to answer", pickStyle:"Pick your style", bigAvatars:"Big avatars, smooth vibes",
    getReady:"Get ready", nameLabel:"Name", namePH:"Type your name", ageLabel:"Age (5â€“16)",
    depthLabel:"Depth", langLabel:"Language", quick:"Quick (24Q)", standard:"Standard (40Q)", deep:"Deep (64Q)",
    start:"Letâ€™s Go! ğŸš€", resume:"Resume", teacherView:"Teacher view",
    greatJob:"ğŸ‰ Great job!", topStrengths:"Top strengths", missionsTitle:"First missions",
    print:"ğŸ–¨ï¸ Print / PDF", csv:"ğŸ“„ Export CSV", json:"ğŸ§© Export JSON", restart:"ğŸ” Restart",
    hintText:"Pick the answer that fits you best. No right or wrong!",
    back:"â¬…ï¸ Back", skip:"ğŸŸï¸ Skip", save:"ğŸ’¾ Save", next:"Next â¡ï¸",
    choices:["ğŸ˜€ Very true","ğŸ™‚ A bit true","ğŸ˜ Not sure","ğŸ™ƒ Not me"],
    domains:{ "Linguistic":"Linguistic","Logical-Mathematical":"Logical-Mathematical","Musical":"Musical","Spatial-Visual":"Spatial-Visual","Bodily-Kinesthetic":"Bodily-Kinesthetic","Interpersonal":"Interpersonal","Intrapersonal":"Intrapersonal","Naturalistic":"Naturalistic" },
    resultsLine:(n)=>`${n}, hereâ€™s your learning profile (Gardnerâ€™s 8 intelligences).`,
    ttsOn:"Speakingâ€¦", ttsOff:"Read Aloud"
  },
  zh:{ brand:"ğŸ§  æˆ‘æ€æ ·å­¦å¾—æœ€å¥½", badge1:"åŠ å¾·çº³ç†è®º", badge2:"æŒ‰å¹´é¾„é€‚é…", badge3:"å¯ä¿å­˜",
    hintKeys:"æŒ‰é”® 1â€“4 é€‰æ‹©ç­”æ¡ˆ", pickStyle:"é€‰æ‹©ä½ çš„å½¢è±¡", bigAvatars:"å¤§å¤´åƒï¼Œæ›´å¥½ç©",
    getReady:"å‡†å¤‡å¼€å§‹", nameLabel:"åå­—", namePH:"è¯·è¾“å…¥åå­—", ageLabel:"å¹´é¾„ï¼ˆ5â€“16ï¼‰",
    depthLabel:"æ·±åº¦", langLabel:"è¯­è¨€", quick:"å¿«é€Ÿï¼ˆ24é¢˜ï¼‰", standard:"æ ‡å‡†ï¼ˆ40é¢˜ï¼‰", deep:"æ·±å…¥ï¼ˆ64é¢˜ï¼‰",
    start:"å¼€å§‹ï¼ğŸš€", resume:"ç»§ç»­", teacherView:"æ•™å¸ˆè§†å›¾",
    greatJob:"ğŸ‰ å¹²å¾—å¥½ï¼", topStrengths:"ä¼˜åŠ¿æ’è¡Œ", missionsTitle:"ç¬¬ä¸€æ¬¡å°ä»»åŠ¡",
    print:"ğŸ–¨ï¸ æ‰“å° / PDF", csv:"ğŸ“„ å¯¼å‡º CSV", json:"ğŸ§© å¯¼å‡º JSON", restart:"ğŸ” é‡æ–°å¼€å§‹",
    hintText:"é€‰æœ€ç¬¦åˆä½ çš„ç­”æ¡ˆï¼Œæ²¡æœ‰å¯¹é”™ã€‚",
    back:"â¬…ï¸ è¿”å›", skip:"ğŸŸï¸ è·³è¿‡", save:"ğŸ’¾ ä¿å­˜", next:"ä¸‹ä¸€é¢˜ â¡ï¸",
    choices:["ğŸ˜€ å¾ˆåƒæˆ‘","ğŸ™‚ æœ‰ç‚¹åƒ","ğŸ˜ ä¸ç¡®å®š","ğŸ™ƒ ä¸åƒæˆ‘"],
    domains:{ "Linguistic":"è¯­è¨€æ™ºèƒ½","Logical-Mathematical":"é€»è¾‘-æ•°å­¦æ™ºèƒ½","Musical":"éŸ³ä¹æ™ºèƒ½","Spatial-Visual":"ç©ºé—´-è§†è§‰æ™ºèƒ½","Bodily-Kinesthetic":"èº«ä½“-åŠ¨è§‰æ™ºèƒ½","Interpersonal":"äººé™…æ™ºèƒ½","Intrapersonal":"è‡ªçŸ¥æ™ºèƒ½","Naturalistic":"è‡ªç„¶è§‚å¯Ÿæ™ºèƒ½" },
    resultsLine:(n)=>`${n}ï¼Œè¿™æ˜¯ä½ çš„å­¦ä¹ ç”»åƒï¼ˆåŠ å¾·çº³å…«å¤§æ™ºèƒ½ï¼‰ã€‚`,
    ttsOn:"æ­£åœ¨æœ—è¯»â€¦", ttsOff:"æœ—è¯»"
  },
  es:{ brand:"ğŸ§  CÃ³mo aprendo mejor", badge1:"Alineado con Gardner", badge2:"Adaptado por edad", badge3:"Se puede guardar",
    hintKeys:"Teclas 1â€“4 para responder", pickStyle:"Elige tu estilo", bigAvatars:"Avatares grandes, fluidez",
    getReady:"PrepÃ¡rate", nameLabel:"Nombre", namePH:"Escribe tu nombre", ageLabel:"Edad (5â€“16)",
    depthLabel:"Profundidad", langLabel:"Idioma", quick:"RÃ¡pido (24)", standard:"EstÃ¡ndar (40)", deep:"Profundo (64)",
    start:"Â¡Vamos! ğŸš€", resume:"Reanudar", teacherView:"Vista docente",
    greatJob:"ğŸ‰ Â¡Buen trabajo!", topStrengths:"Fortalezas principales", missionsTitle:"Primeras misiones",
    print:"ğŸ–¨ï¸ Imprimir / PDF", csv:"ğŸ“„ Exportar CSV", json:"ğŸ§© Exportar JSON", restart:"ğŸ” Reiniciar",
    hintText:"Elige lo que mÃ¡s te define. Â¡No hay correcto o incorrecto!",
    back:"â¬…ï¸ AtrÃ¡s", skip:"ğŸŸï¸ Saltar", save:"ğŸ’¾ Guardar", next:"Siguiente â¡ï¸",
    choices:["ğŸ˜€ Muy cierto","ğŸ™‚ Un poco cierto","ğŸ˜ No seguro","ğŸ™ƒ No me describe"],
    domains:{ "Linguistic":"LingÃ¼Ã­stica","Logical-Mathematical":"LÃ³gico-matemÃ¡tica","Musical":"Musical","Spatial-Visual":"Espacial-visual","Bodily-Kinesthetic":"Corporal-cinestÃ©sica","Interpersonal":"Interpersonal","Intrapersonal":"Intrapersonal","Naturalistic":"Naturalista" },
    resultsLine:(n)=>`${n}, este es tu perfil de aprendizaje (ocho inteligencias de Gardner).`,
    ttsOn:"Hablandoâ€¦", ttsOff:"Leer en voz alta"
  },
  fr:{ brand:"ğŸ§  Comment jâ€™apprends le mieux", badge1:"AlignÃ© Gardner", badge2:"AdaptÃ© Ã  lâ€™Ã¢ge", badge3:"Sauvegarde",
    hintKeys:"Touches 1â€“4 pour rÃ©pondre", pickStyle:"Choisis ton style", bigAvatars:"Grands avatars, fluide",
    getReady:"On se prÃ©pare", nameLabel:"PrÃ©nom", namePH:"Ã‰cris ton prÃ©nom", ageLabel:"Ã‚ge (5â€“16)",
    depthLabel:"Niveau", langLabel:"Langue", quick:"Rapide (24)", standard:"Standard (40)", deep:"Approfondi (64)",
    start:"Câ€™est parti ! ğŸš€", resume:"Reprendre", teacherView:"Vue enseignant",
    greatJob:"ğŸ‰ Bravo !", topStrengths:"Forces principales", missionsTitle:"PremiÃ¨res missions",
    print:"ğŸ–¨ï¸ Imprimer / PDF", csv:"ğŸ“„ Exporter CSV", json:"ğŸ§© Exporter JSON", restart:"ğŸ” Recommencer",
    hintText:"Choisis ce qui te ressemble le plus. Pas de bonne ou mauvaise rÃ©ponse !",
    back:"â¬…ï¸ Retour", skip:"ğŸŸï¸ Passer", save:"ğŸ’¾ Sauver", next:"Suivant â¡ï¸",
    choices:["ğŸ˜€ TrÃ¨s vrai","ğŸ™‚ Un peu vrai","ğŸ˜ Pas sÃ»r","ğŸ™ƒ Ce nâ€™est pas moi"],
    domains:{ "Linguistic":"Linguistique","Logical-Mathematical":"Logique-mathÃ©matique","Musical":"Musicale","Spatial-Visual":"Spatiale-visuelle","Bodily-Kinesthetic":"Corporelle-kinesthÃ©sique","Interpersonal":"Interpersonnelle","Intrapersonal":"Intrapersonnelle","Naturalistic":"Naturaliste" },
    resultsLine:(n)=>`${n}, voici ton profil dâ€™apprentissage (huit intelligences de Gardner).`,
    ttsOn:"Lectureâ€¦", ttsOff:"Lire Ã  voix haute"
  }
};

/* ================= Item BANKS (8 per domain per age band) ================= */
const BANKS = {
  en: {
    YOUNG:{
      "Linguistic":["I like telling funny stories.","I enjoy new words and rhymes.","I remember lines from books.","I like writing small notes.","I like word games like rhymes.","I explain things in my own words.","I like friendly talks about ideas.","I keep a little diary or list."],
      "Logical-Mathematical":["I enjoy number puzzles.","I sort things by size or color.","I fix problems one step at a time.","I spot simple patterns fast.","I make a plan before I start.","I like simple strategy games.","I break big jobs into small jobs.","I check my work carefully."],
      "Musical":["I clap to the beat.","Songs help me remember.","I hear small changes in music.","I make up little tunes.","I pick music to match my mood.","I like trying instruments or apps.","I like quiet music when I work.","I can copy a rhythm I hear."],
      "Spatial-Visual":["I like building with blocks or LEGO.","I draw from my imagination.","I enjoy jigsaw puzzles.","I can read simple maps or signs.","I picture things turning around.","I make quick drawings to explain.","I like making posters or signs.","I enjoy crafts and models."],
      "Bodily-Kinesthetic":["I learn best when I can move.","I like acting things out.","I enjoy making things with my hands.","I like sports or dancing.","I use my hands when I talk.","I focus better after I move.","I like simple science labs.","I practice to get better at skills."],
      "Interpersonal":["I like helping friends.","I enjoy team games.","I notice when someone needs help.","I can tell how a friend feels.","I like being a helper or leader.","I learn by telling a friend what I know.","I can solve small fights kindly.","I like helping younger kids."],
      "Intrapersonal":["I know what I am good at.","I like quiet time to think.","I set small goals for myself.","I notice when my feelings change.","I plan my study time.","I think about what worked well.","I pick ways to learn that fit me.","I keep trying when it is hard."],
      "Naturalistic":["I enjoy animals or plants.","I like being outside.","I collect rocks, leaves, or shells.","I notice small changes in weather.","I group nature things that are alike.","I like drawing nature.","I learn about habitats.","I care for a pet or plant."]
    },
    OLDER:{
      "Linguistic":["I like telling stories or jokes to friends.","I enjoy learning new words and rhymes.","I can remember lines from books or movies.","I like writing notes, poems, or captions.","I enjoy playing with word puzzles or riddles.","I can explain ideas clearly to others.","I enjoy debates and persuasive speaking.","I keep a journal or diary about my thoughts."],
      "Logical-Mathematical":["I enjoy number puzzles and brainteasers.","I sort or group things to make sense of them.","I fix problems step by step.","I spot patterns or rules quickly.","I plan before I start a task.","I like strategy or logic games.","I break big problems into smaller parts.","I check my work carefully and logically."],
      "Musical":["I clap or tap to the beat without thinking.","Songs help me remember facts or steps.","I notice small changes in melodies.","I make up little tunes or rhythms.","I can match music to a mood or scene.","I enjoy playing with instruments or apps.","I like background music while I work.","I can repeat a rhythm I hear."],
      "Spatial-Visual":["I enjoy building models, blocks, or LEGO.","I draw from imagination or memory.","Iâ€™m good at jigsaw puzzles or tangrams.","I can read maps and follow diagrams.","I imagine how things look when rotated.","I sketch quick diagrams to explain ideas.","I design posters, slides, or graphics.","I enjoy 3D design, crafts, or architecture."],
      "Bodily-Kinesthetic":["I learn best when I can move around.","I like acting things out or role-playing.","I enjoy crafts, making, or building by hand.","I like sports, dance, or movement breaks.","I use gestures when I explain things.","I focus better after a short movement.","I like labs, prototyping, or hands-on tasks.","I practice physical skills to get better."],
      "Interpersonal":["I like helping friends and classmates.","I enjoy team games or group projects.","I notice when someone needs help.","I can tell how others feel from their faces.","I like being a leader or organizer.","I learn by explaining ideas to a partner.","I resolve conflicts calmly and fairly.","I mentor or support younger students."],
      "Intrapersonal":["I know what Iâ€™m good at and whatâ€™s hard for me.","I like quiet time to think by myself.","I set small goals and track my progress.","I notice when my feelings change.","I plan my study time to fit my style.","I reflect on what worked and what didnâ€™t.","I choose strategies that match who I am.","I stay calm and keep trying when itâ€™s hard."],
      "Naturalistic":["I enjoy animals, plants, or caring for nature.","I like being outdoors and exploring.","I collect or sort natural objects.","I notice small changes in weather or seasons.","I group things in nature by how theyâ€™re alike.","I like nature sketches or photos.","I research ecosystems or habitats.","I care for pets or plants regularly."]
    }
  },
  zh:{
    YOUNG:{
      "Linguistic":["æˆ‘å–œæ¬¢è®²æœ‰è¶£çš„æ•…äº‹ã€‚","æˆ‘å–œæ¬¢æ–°è¯å’ŒæŠ¼éŸµã€‚","æˆ‘èƒ½è®°ä½ä¹¦é‡Œçš„å¥å­ã€‚","æˆ‘çˆ±å†™å°ä¾¿æ¡ã€‚","æˆ‘å–œæ¬¢ç©æŠ¼éŸµçš„æ–‡å­—æ¸¸æˆã€‚","æˆ‘ä¼šç”¨è‡ªå·±çš„è¯è§£é‡Šäº‹æƒ…ã€‚","æˆ‘å–œæ¬¢è½»æ¾èŠå¤©åˆ†äº«æƒ³æ³•ã€‚","æˆ‘ä¼šè®°å°æ—¥è®°æˆ–æ¸…å•ã€‚"],
      "Logical-Mathematical":["æˆ‘å–œæ¬¢æ•°å­—è°œé¢˜ã€‚","æˆ‘ä¼šæŠŠä¸œè¥¿æŒ‰å¤§å°æˆ–é¢œè‰²åˆ†ç±»ã€‚","æˆ‘ä¸€æ­¥ä¸€æ­¥åœ°è§£å†³é—®é¢˜ã€‚","æˆ‘å¾ˆå¿«çœ‹å‡ºç®€å•çš„è§„å¾‹ã€‚","å¼€å§‹å‰æˆ‘ä¼šå…ˆæƒ³å¥½è®¡åˆ’ã€‚","æˆ‘å–œæ¬¢ç®€å•çš„ç­–ç•¥æ¸¸æˆã€‚","æˆ‘æŠŠå¤§ä»»åŠ¡åˆ†æˆå°ä»»åŠ¡ã€‚","æˆ‘ä¼šä»”ç»†æ£€æŸ¥ä½œä¸šã€‚"],
      "Musical":["æˆ‘ä¼šè·Ÿç€èŠ‚å¥æ‹æ‰‹ã€‚","æ­Œæ›²èƒ½å¸®æˆ‘è®°ä½ä¸œè¥¿ã€‚","æˆ‘èƒ½å¬å‡ºéŸ³ä¹é‡Œçš„å°å˜åŒ–ã€‚","æˆ‘ä¼šç¼–å°æ›²å­ã€‚","æˆ‘ä¼šé€‰å’Œå¿ƒæƒ…åŒ¹é…çš„éŸ³ä¹ã€‚","æˆ‘å–œæ¬¢è¯•ä¹å™¨æˆ–éŸ³ä¹åº”ç”¨ã€‚","æˆ‘å­¦ä¹ æ—¶å–œæ¬¢è½»éŸ³ä¹ã€‚","æˆ‘èƒ½æ¨¡ä»¿å¬åˆ°çš„èŠ‚å¥ã€‚"],
      "Spatial-Visual":["æˆ‘å–œæ¬¢ç”¨ç§¯æœ¨/ä¹é«˜æ­å»ºã€‚","æˆ‘ä¼šç”»æƒ³è±¡ä¸­çš„ä¸œè¥¿ã€‚","æˆ‘å–œæ¬¢æ‹¼å›¾ã€‚","æˆ‘ä¼šçœ‹ç®€å•åœ°å›¾æˆ–æ ‡å¿—ã€‚","æˆ‘ä¼šåœ¨è„‘ä¸­è½¬åŠ¨ç‰©ä½“ã€‚","æˆ‘ä¼šç”»å°å›¾æ¥è¯´æ˜ã€‚","æˆ‘å–œæ¬¢åšæµ·æŠ¥æˆ–ç‰Œå­ã€‚","æˆ‘å–œæ¬¢æ‰‹å·¥å’Œæ¨¡å‹ã€‚"],
      "Bodily-Kinesthetic":["æˆ‘åŠ¨èµ·æ¥å­¦å¾—æœ€å¥½ã€‚","æˆ‘å–œæ¬¢è¡¨æ¼”æƒ…æ™¯ã€‚","æˆ‘å–œæ¬¢ç”¨æ‰‹åšä¸œè¥¿ã€‚","æˆ‘å–œæ¬¢è¿åŠ¨æˆ–è·³èˆã€‚","æˆ‘è¯´è¯æ—¶ä¼šç”¨æ‰‹åŠ¿ã€‚","æ´»åŠ¨ä¸€ä¸‹æˆ‘æ›´ä¸“æ³¨ã€‚","æˆ‘å–œæ¬¢ç®€å•çš„ç§‘å­¦å°å®éªŒã€‚","æˆ‘ä¼šç»ƒä¹ è®©è‡ªå·±æ›´ç†Ÿç»ƒã€‚"],
      "Interpersonal":["æˆ‘å–œæ¬¢å¸®åŠ©åŒå­¦ã€‚","æˆ‘å–œæ¬¢å›¢é˜Ÿæ¸¸æˆã€‚","æˆ‘ä¼šæ³¨æ„è°éœ€è¦å¸®åŠ©ã€‚","æˆ‘èƒ½çœ‹å‡ºæœ‹å‹çš„å¿ƒæƒ…ã€‚","æˆ‘å–œæ¬¢åšå°åŠ©æ‰‹æˆ–å°é˜Ÿé•¿ã€‚","æˆ‘æŠŠä¼šçš„è®²ç»™åŒå­¦å¬å°±èƒ½å­¦ä¼šã€‚","æˆ‘ä¼šå‹å¥½åœ°è§£å†³å°çŸ›ç›¾ã€‚","æˆ‘å–œæ¬¢ç…§é¡¾å°ä¸€ç‚¹çš„å­©å­ã€‚"],
      "Intrapersonal":["æˆ‘çŸ¥é“è‡ªå·±æ“…é•¿ä»€ä¹ˆã€‚","æˆ‘å–œæ¬¢å®‰é™åœ°æƒ³ä¸€æƒ³ã€‚","æˆ‘ä¼šç»™è‡ªå·±å®šå°ç›®æ ‡ã€‚","æˆ‘æ³¨æ„åˆ°è‡ªå·±æƒ…ç»ªçš„å˜åŒ–ã€‚","æˆ‘ä¼šå®‰æ’å­¦ä¹ æ—¶é—´ã€‚","æˆ‘ä¼šæƒ³æƒ³ä»€ä¹ˆæ–¹æ³•æœ‰æ•ˆã€‚","æˆ‘ä¼šé€‰é€‚åˆè‡ªå·±çš„å­¦ä¹ æ–¹æ³•ã€‚","é‡åˆ°éš¾é¢˜æˆ‘ä¼šåšæŒã€‚"],
      "Naturalistic":["æˆ‘å–œæ¬¢åŠ¨ç‰©æˆ–æ¤ç‰©ã€‚","æˆ‘å–œæ¬¢åˆ°æˆ·å¤–ã€‚","æˆ‘ä¼šæ”¶é›†çŸ³å¤´ã€æ ‘å¶æˆ–è´å£³ã€‚","æˆ‘æ³¨æ„å¤©æ°”çš„å°å˜åŒ–ã€‚","æˆ‘ä¼šæŠŠç›¸ä¼¼çš„è‡ªç„¶ç‰©åˆ†åˆ°ä¸€ç»„ã€‚","æˆ‘å–œæ¬¢ç”»è‡ªç„¶æ™¯ç‰©ã€‚","æˆ‘ä¼šäº†è§£æ –æ¯åœ°ã€‚","æˆ‘ä¼šç…§é¡¾å® ç‰©æˆ–æ¤ç‰©ã€‚"]
    },
    OLDER:{
      "Linguistic":["æˆ‘å–œæ¬¢ç»™æœ‹å‹è®²æ•…äº‹æˆ–ç¬‘è¯ã€‚","æˆ‘å–œæ¬¢å­¦æ–°è¯å’ŒæŠ¼éŸµã€‚","æˆ‘èƒ½è®°ä½ä¹¦æˆ–ç”µå½±é‡Œçš„å°è¯ã€‚","æˆ‘å–œæ¬¢å†™ä¾¿æ¡ã€è¯—æˆ–è¯´æ˜ã€‚","æˆ‘å–œæ¬¢æ–‡å­—è°œé¢˜æˆ–è„‘ç­‹æ€¥è½¬å¼¯ã€‚","æˆ‘èƒ½æ¸…æ¥šåœ°è§£é‡Šæƒ³æ³•ã€‚","æˆ‘å–œæ¬¢è¾©è®ºæˆ–åŠè¯´æ€§çš„è¡¨è¾¾ã€‚","æˆ‘ä¼šå†™æ—¥è®°è®°å½•æƒ³æ³•ã€‚"],
      "Logical-Mathematical":["æˆ‘å–œæ¬¢æ•°å­—è°œé¢˜å’Œç›Šæ™ºé¢˜ã€‚","æˆ‘ä¼šæŠŠä¸œè¥¿åˆ†ç±»æ¥ç†è§£ã€‚","æˆ‘æŒ‰æ­¥éª¤è§£å†³é—®é¢˜ã€‚","æˆ‘å¾ˆå¿«å‘ç°è§„å¾‹æˆ–è§„åˆ™ã€‚","æˆ‘åšäº‹å‰ä¼šå…ˆè®¡åˆ’ã€‚","æˆ‘å–œæ¬¢ç­–ç•¥æˆ–é€»è¾‘æ¸¸æˆã€‚","æˆ‘æŠŠå¤§é—®é¢˜æ‹†æˆå°é—®é¢˜ã€‚","æˆ‘ä¼šæœ‰é€»è¾‘åœ°æ£€æŸ¥ä½œä¸šã€‚"],
      "Musical":["æˆ‘ä¼šä¸è‡ªè§‰åœ°è·Ÿç€èŠ‚æ‹æ‰“æ‹ã€‚","æ­Œæ›²èƒ½å¸®æˆ‘è®°æ­¥éª¤æˆ–çŸ¥è¯†ã€‚","æˆ‘èƒ½å¬å‡ºæ—‹å¾‹é‡Œçš„å°å˜åŒ–ã€‚","æˆ‘ä¼šç¼–å°æ—‹å¾‹æˆ–èŠ‚å¥ã€‚","æˆ‘èƒ½æŠŠéŸ³ä¹å’Œåœºæ™¯/å¿ƒæƒ…é…å¯¹ã€‚","æˆ‘å–œæ¬¢ç©ä¹å™¨æˆ–éŸ³ä¹åº”ç”¨ã€‚","æˆ‘å­¦ä¹ æ—¶å–œæ¬¢æœ‰èƒŒæ™¯éŸ³ä¹ã€‚","æˆ‘èƒ½é‡å¤åˆšå¬åˆ°çš„èŠ‚å¥ã€‚"],
      "Spatial-Visual":["æˆ‘å–œæ¬¢åšæ¨¡å‹ã€ç§¯æœ¨æˆ–ä¹é«˜ã€‚","æˆ‘ä¼šå‡­æƒ³è±¡æˆ–è®°å¿†ç”»ç”»ã€‚","æˆ‘æ“…é•¿æ‹¼å›¾æˆ–ä¸ƒå·§æ¿ã€‚","æˆ‘ä¼šçœ‹åœ°å›¾å’Œå›¾ç¤ºã€‚","æˆ‘èƒ½æƒ³è±¡ç‰©ä½“æ—‹è½¬åçš„æ ·å­ã€‚","æˆ‘ä¼šç”»å°å›¾æ¥è¯´æ˜æ€è·¯ã€‚","æˆ‘ä¼šè®¾è®¡æµ·æŠ¥ã€å¹»ç¯ç‰‡æˆ–å›¾å½¢ã€‚","æˆ‘å–œæ¬¢3Dè®¾è®¡ã€æ‰‹å·¥æˆ–å»ºç­‘ã€‚"],
      "Bodily-Kinesthetic":["æˆ‘åŠ¨èµ·æ¥æ—¶å­¦å¾—æœ€å¥½ã€‚","æˆ‘å–œæ¬¢è§’è‰²æ‰®æ¼”æˆ–æƒ…æ™¯è¡¨æ¼”ã€‚","æˆ‘å–œæ¬¢æ‰‹å·¥ã€åˆ¶ä½œæˆ–åŠ¨æ‰‹å»ºé€ ã€‚","æˆ‘å–œæ¬¢è¿åŠ¨ã€èˆè¹ˆæˆ–çŸ­æš‚æ´»åŠ¨ã€‚","æˆ‘è§£é‡Šæ—¶ä¼šç”¨æ‰‹åŠ¿ã€‚","æ´»åŠ¨ä¸€ä¸‹åæˆ‘æ›´ä¸“æ³¨ã€‚","æˆ‘å–œæ¬¢å®éªŒã€åŸå‹æˆ–åŠ¨æ‰‹ä»»åŠ¡ã€‚","æˆ‘é€šè¿‡ç»ƒä¹ æé«˜èº«ä½“æŠ€èƒ½ã€‚"],
      "Interpersonal":["æˆ‘å–œæ¬¢å¸®åŠ©æœ‹å‹å’ŒåŒå­¦ã€‚","æˆ‘å–œæ¬¢å›¢é˜Ÿæ¸¸æˆæˆ–å°ç»„é¡¹ç›®ã€‚","æˆ‘ä¼šæ³¨æ„è°éœ€è¦å¸®åŠ©ã€‚","æˆ‘èƒ½ä»è¡¨æƒ…çœ‹å‡ºåˆ«äººæ„Ÿå—ã€‚","æˆ‘å–œæ¬¢åšç»„ç»‡è€…æˆ–å¸¦å¤´äººã€‚","å’ŒåŒä¼´äº’ç›¸è®²è§£è®©æˆ‘å­¦å¾—æ›´å¥½ã€‚","æˆ‘èƒ½å†·é™å…¬å¹³åœ°è§£å†³å†²çªã€‚","æˆ‘ä¼šå¸®åŠ©å¹´çºªæ›´å°çš„åŒå­¦ã€‚"],
      "Intrapersonal":["æˆ‘çŸ¥é“è‡ªå·±çš„å¼ºé¡¹ä¸éš¾ç‚¹ã€‚","æˆ‘å–œæ¬¢ç‹¬å¤„æ€è€ƒã€‚","æˆ‘ä¼šè®¾å®šå¹¶è·Ÿè¸ªå°ç›®æ ‡ã€‚","æˆ‘æ³¨æ„åˆ°æƒ…ç»ªä½•æ—¶å˜åŒ–ã€‚","æˆ‘ä¼šå®‰æ’å­¦ä¹ æ—¶é—´ï¼Œç¬¦åˆæˆ‘çš„æ–¹å¼ã€‚","æˆ‘ä¼šåæ€å“ªäº›æ–¹æ³•æœ‰æ•ˆã€‚","æˆ‘é€‰æ‹©é€‚åˆè‡ªå·±çš„ç­–ç•¥ã€‚","é‡åˆ°å›°éš¾æˆ‘èƒ½ä¿æŒå†·é™å¹¶åšæŒã€‚"],
      "Naturalistic":["æˆ‘å–œæ¬¢åŠ¨ç‰©ã€æ¤ç‰©æˆ–å…³çˆ±è‡ªç„¶ã€‚","æˆ‘å–œæ¬¢åœ¨æˆ·å¤–æ¢ç©¶ã€‚","æˆ‘ä¼šæ”¶é›†æˆ–åˆ†ç±»è‡ªç„¶ç‰©ã€‚","æˆ‘æ³¨æ„åˆ°å¤©æ°”æˆ–å­£èŠ‚çš„å°å˜åŒ–ã€‚","æˆ‘ä¼šæŒ‰ç›¸ä¼¼ç‚¹ç»™è‡ªç„¶ç‰©åˆ†ç»„ã€‚","æˆ‘å–œæ¬¢å†™ç”Ÿ/æ‹ç…§è‡ªç„¶ã€‚","æˆ‘ä¼šç ”ç©¶ç”Ÿæ€ç³»ç»Ÿæˆ–æ –æ¯åœ°ã€‚","æˆ‘ä¼šå®šæœŸç…§é¡¾å® ç‰©æˆ–æ¤ç‰©ã€‚"]
    }
  },
  es:{
    YOUNG:{
      "Linguistic":["Me gusta contar historias divertidas.","Me gustan las palabras nuevas y las rimas.","Recuerdo frases de los libros.","Me gusta escribir notitas.","Me gustan los juegos con rimas.","Explico cosas con mis propias palabras.","Me gusta charlar ideas con amigos.","Llevo un pequeÃ±o diario o lista."],
      "Logical-Mathematical":["Me gustan los acertijos de nÃºmeros.","Ordeno cosas por tamaÃ±o o color.","Resuelvo paso a paso.","Veo patrones simples rÃ¡pido.","Hago un plan antes de empezar.","Me gustan juegos de estrategia simples.","Divido tareas grandes en pequeÃ±as.","Reviso mi trabajo con cuidado."],
      "Musical":["Aplaudo con el ritmo.","Las canciones me ayudan a recordar.","Oigo cambios pequeÃ±os en la mÃºsica.","Invento pequeÃ±as melodÃ­as.","Elijo mÃºsica segÃºn mi Ã¡nimo.","Me gusta probar instrumentos o apps.","Prefiero mÃºsica suave al trabajar.","Puedo copiar un ritmo que oigo."],
      "Spatial-Visual":["Me gusta construir con bloques o LEGO.","Dibujo de mi imaginaciÃ³n.","Me gustan los rompecabezas.","Leo mapas o seÃ±ales simples.","Imagino cosas girando.","Hago dibujitos para explicar.","Hago carteles o letreros.","Me gustan las manualidades y maquetas."],
      "Bodily-Kinesthetic":["Aprendo mejor cuando me muevo.","Me gusta representar cosas.","Disfruto hacer cosas con mis manos.","Me gustan los deportes o bailar.","Uso gestos al explicar.","Me concentro mejor tras moverme.","Me gustan pequeÃ±os experimentos.","Practico para hacerlo mejor."],
      "Interpersonal":["Me gusta ayudar a mis amigos.","Disfruto juegos en equipo.","Veo cuÃ¡ndo alguien necesita ayuda.","Puedo notar cÃ³mo se siente un amigo.","Me gusta ser ayudante o lÃ­der.","Aprendo explicando a un amigo.","Resuelvo peleas pequeÃ±as con calma.","Me gusta ayudar a niÃ±os mÃ¡s chicos."],
      "Intrapersonal":["SÃ© en quÃ© soy bueno.","Me gusta pensar en silencio.","Me pongo metas pequeÃ±as.","Noto cambios en mis emociones.","Organizo mi tiempo de estudio.","Pienso quÃ© me funcionÃ³.","Elijo maneras que me quedan bien.","Sigo intentando aunque sea difÃ­cil."],
      "Naturalistic":["Me gustan los animales o plantas.","Me gusta estar afuera.","Colecciono piedras, hojas o conchas.","Noto cambios en el clima.","Agrupo cosas de la naturaleza por parecido.","Me gusta dibujar la naturaleza.","Aprendo sobre hÃ¡bitats.","Cuido una mascota o planta."]
    },
    OLDER:{
      "Linguistic":["Me gusta contar historias o chistes.","Disfruto aprender palabras y rimas nuevas.","Recuerdo frases de libros o pelÃ­culas.","Me gusta escribir notas, poemas o pies de foto.","Me gustan los juegos de palabras o acertijos.","Puedo explicar ideas con claridad.","Disfruto los debates y convencer a otros.","Llevo un diario con mis ideas."],
      "Logical-Mathematical":["Me gustan los acertijos y rompecabezas numÃ©ricos.","Ordeno o agrupo cosas para entenderlas.","Resuelvo problemas paso a paso.","Veo patrones o reglas rÃ¡pidamente.","Planifico antes de comenzar.","Me gustan juegos de estrategia o lÃ³gica.","Divido problemas grandes en partes pequeÃ±as.","Reviso mi trabajo con lÃ³gica y cuidado."],
      "Musical":["Aplaudo o doy golpecitos al ritmo sin pensarlo.","Las canciones me ayudan a recordar.","Noto cambios pequeÃ±os en melodÃ­as.","Creo pequeÃ±as melodÃ­as o ritmos.","Puedo elegir mÃºsica para un Ã¡nimo o escena.","Disfruto tocar instrumentos o apps.","Me gusta mÃºsica de fondo al trabajar.","Repito un ritmo que escucho."],
      "Spatial-Visual":["Disfruto construir modelos o LEGO.","Dibujo de imaginaciÃ³n o memoria.","Soy bueno con rompecabezas o tangram.","Leo mapas y sigo diagramas.","Imagino objetos girando.","Hago esquemas rÃ¡pidos para explicar.","DiseÃ±o carteles, diapositivas o grÃ¡ficos.","Disfruto diseÃ±o 3D, manualidades o arquitectura."],
      "Bodily-Kinesthetic":["Aprendo mejor moviÃ©ndome.","Me gusta actuar o representar roles.","Me gustan las manualidades o construir.","Me gustan los deportes, baile o pausas activas.","Uso gestos al explicar.","Me concentro mejor tras moverme un poco.","Me gustan laboratorios o tareas prÃ¡cticas.","Mejoro habilidades fÃ­sicas con prÃ¡ctica."],
      "Interpersonal":["Me gusta ayudar a amigos y compaÃ±eros.","Disfruto proyectos en equipo.","Veo cuÃ¡ndo alguien necesita ayuda.","Puedo leer emociones por la cara.","Me gusta liderar u organizar.","Aprendo explicando a un compaÃ±ero.","Resuelvo conflictos con calma y justicia.","Apoyo a estudiantes mÃ¡s jÃ³venes."],
      "Intrapersonal":["SÃ© en quÃ© soy bueno y quÃ© me cuesta.","Me gusta pensar a solas.","Pongo metas pequeÃ±as y las sigo.","Noto cuando cambian mis emociones.","Organizo mi estudio a mi manera.","Reflexiono sobre lo que funcionÃ³.","Elijo estrategias que van conmigo.","Sigo calmado y persistente cuando es difÃ­cil."],
      "Naturalistic":["Disfruto animales, plantas o cuidar la naturaleza.","Me gusta explorar al aire libre.","Colecciono u ordeno objetos naturales.","Noto cambios en el clima o estaciones.","Agrupo cosas de la naturaleza por similitud.","Me gusta dibujar o fotografiar la naturaleza.","Investigo ecosistemas o hÃ¡bitats.","Cuido mascotas o plantas con regularidad."]
    }
  },
  fr:{
    YOUNG:{
      "Linguistic":["Jâ€™aime raconter des histoires drÃ´les.","Jâ€™aime les nouveaux mots et les rimes.","Je retiens des phrases de livres.","Jâ€™aime Ã©crire de petits mots.","Jâ€™aime les jeux de rimes.","Jâ€™explique avec mes propres mots.","Jâ€™aime parler dâ€™idÃ©es avec des amis.","Je tiens un petit journal ou une liste."],
      "Logical-Mathematical":["Jâ€™aime les puzzles de nombres.","Je trie par taille ou couleur.","Je rÃ©sous Ã©tape par Ã©tape.","Je vois vite les petits motifs.","Je fais un plan avant de commencer.","Jâ€™aime les jeux de stratÃ©gie simples.","Je coupe un grand travail en petits.","Je vÃ©rifie mon travail avec soin."],
      "Musical":["Je tape des mains sur le rythme.","Les chansons mâ€™aident Ã  retenir.","Jâ€™entends de petits changements dans la musique.","Jâ€™invente de petites mÃ©lodies.","Je choisis une musique selon mon humeur.","Jâ€™aime essayer des instruments ou applis.","Jâ€™aime une musique douce pour travailler.","Je peux copier un rythme entendu."],
      "Spatial-Visual":["Jâ€™aime construire avec des blocs/LEGO.","Je dessine dâ€™imagination.","Jâ€™aime les puzzles.","Je lis des cartes ou panneaux simples.","Jâ€™imagine les objets qui tournent.","Je fais de petits croquis pour expliquer.","Jâ€™aime faire des affiches.","Jâ€™aime les bricolages et maquettes."],
      "Bodily-Kinesthetic":["Jâ€™apprends mieux en bougeant.","Jâ€™aime jouer des scÃ¨nes.","Jâ€™aime fabriquer avec mes mains.","Jâ€™aime le sport ou la danse.","Jâ€™utilise des gestes pour expliquer.","AprÃ¨s avoir bougÃ© je me concentre mieux.","Jâ€™aime les petites expÃ©riences.","Je mâ€™exerce pour mâ€™amÃ©liorer."],
      "Interpersonal":["Jâ€™aime aider mes amis.","Jâ€™aime les jeux dâ€™Ã©quipe.","Je vois quand quelquâ€™un a besoin dâ€™aide.","Je devine comment se sent un ami.","Jâ€™aime Ãªtre aide ou chef dâ€™Ã©quipe.","Jâ€™apprends en expliquant Ã  un ami.","Je rÃ¨gle les petits conflits gentiment.","Jâ€™aime aider les plus jeunes."],
      "Intrapersonal":["Je sais ce que je fais bien.","Jâ€™aime penser au calme.","Je me fixe de petits buts.","Je remarque mes changements dâ€™humeur.","Jâ€™organise mon temps dâ€™Ã©tude.","Je pense Ã  ce qui a marchÃ©.","Je choisis des faÃ§ons de travailler qui me vont.","Je persÃ©vÃ¨re quand câ€™est difficile."],
      "Naturalistic":["Jâ€™aime les animaux ou les plantes.","Jâ€™aime Ãªtre dehors.","Je collectionne des cailloux, feuilles ou coquillages.","Je remarque de petits changements de mÃ©tÃ©o.","Je groupe les choses de nature qui se ressemblent.","Jâ€™aime dessiner la nature.","Jâ€™apprends les habitats.","Je mâ€™occupe dâ€™un animal ou dâ€™une plante."]
    },
    OLDER:{
      "Linguistic":["Jâ€™aime raconter des histoires ou blagues.","Jâ€™aime apprendre de nouveaux mots et rimes.","Je me souviens de rÃ©pliques de livres/films.","Jâ€™aime Ã©crire notes, poÃ¨mes ou lÃ©gendes.","Jâ€™aime les jeux de mots et Ã©nigmes.","Jâ€™explique clairement des idÃ©es.","Jâ€™aime dÃ©battre et convaincre.","Je tiens un journal de mes idÃ©es."],
      "Logical-Mathematical":["Jâ€™aime les Ã©nigmes et casse-tÃªtes numÃ©riques.","Je regroupe des choses pour mieux comprendre.","Je rÃ©sous les problÃ¨mes Ã©tape par Ã©tape.","Je repÃ¨re vite des motifs ou rÃ¨gles.","Je planifie avant de commencer.","Jâ€™aime les jeux de stratÃ©gie/logique.","Je divise un gros problÃ¨me en parties.","Je vÃ©rifie mon travail avec logique."],
      "Musical":["Je tape ou claque en rythme sans y penser.","Les chansons mâ€™aident Ã  mÃ©moriser.","Je note de petits changements de mÃ©lodie.","Jâ€™invente de petites mÃ©lodies/rythmes.","Jâ€™associe une musique Ã  une ambiance.","Jâ€™aime jouer dâ€™un instrument ou dâ€™applis.","Jâ€™aime une musique de fond pour travailler.","Je peux rÃ©pÃ©ter un rythme entendu."],
      "Spatial-Visual":["Jâ€™aime construire des modÃ¨les ou LEGO.","Je dessine dâ€™imagination ou mÃ©moire.","Je suis bon aux puzzles/tangrams.","Je lis des cartes et suis des schÃ©mas.","Jâ€™imagine des objets tournÃ©s.","Je fais des schÃ©mas rapides pour expliquer.","Je conÃ§ois affiches, diapos, graphiques.","Jâ€™aime le design 3D, le bricolage, lâ€™architecture."],
      "Bodily-Kinesthetic":["Jâ€™apprends mieux en bougeant.","Jâ€™aime le jeu de rÃ´le.","Jâ€™aime fabriquer/construire Ã  la main.","Jâ€™aime sport, danse ou pauses actives.","Jâ€™utilise des gestes pour expliquer.","Je me concentre mieux aprÃ¨s avoir bougÃ©.","Jâ€™aime les ateliers, prototypages, tÃ¢ches pratiques.","Jâ€™amÃ©liore mes gestes par la pratique."],
      "Interpersonal":["Jâ€™aime aider amis et camarades.","Jâ€™aime les projets dâ€™Ã©quipe.","Je remarque qui a besoin dâ€™aide.","Je lis les Ã©motions sur les visages.","Jâ€™aime Ãªtre leader/organisateur.","Jâ€™apprends en expliquant Ã  un partenaire.","Je rÃ¨gle les conflits avec calme et justice.","Jâ€™accompagne des Ã©lÃ¨ves plus jeunes."],
      "Intrapersonal":["Je sais mes forces et mes difficultÃ©s.","Jâ€™aime rÃ©flÃ©chir seul.","Je fixe de petits objectifs et les suis.","Je remarque quand mes Ã©motions changent.","Jâ€™organise mon Ã©tude selon mon style.","Je rÃ©flÃ©chis Ã  ce qui marche ou non.","Je choisis des stratÃ©gies qui me conviennent.","Je reste calme et persÃ©vÃ©rant quand câ€™est dur."],
      "Naturalistic":["Jâ€™aime les animaux/plantes et prendre soin de la nature.","Jâ€™aime explorer dehors.","Je collectionne/ordonne des objets naturels.","Je remarque des changements mÃ©tÃ©o/saisons.","Je regroupe par ressemblances dans la nature.","Jâ€™aime croquis/photos de nature.","Jâ€™Ã©tudie Ã©cosystÃ¨mes/habitats.","Je mâ€™occupe rÃ©guliÃ¨rement dâ€™animaux/plantes."]
    }
  }
};

/* ================= Core constants ================= */
const DOMAINS=["Linguistic","Logical-Mathematical","Musical","Spatial-Visual","Bodily-Kinesthetic","Interpersonal","Intrapersonal","Naturalistic"];
const ICON={"Linguistic":"ğŸ“š","Logical-Mathematical":"ğŸ”¢","Musical":"ğŸµ","Spatial-Visual":"ğŸ¨","Bodily-Kinesthetic":"ğŸ¤¸","Interpersonal":"ğŸ¤","Intrapersonal":"ğŸ§ ","Naturalistic":"ğŸŒ³"};
const DEPTH_MAP={24:3,40:5,64:8};
const ANCHORS_PER_DOMAIN=3;
const SCORE=[3,2,1,0];
const AVATARS=["ğŸ¦Š","ğŸ¼","ğŸ¦„","ğŸ¯","ğŸ¨","ğŸ¸","ğŸ™","ğŸ","ğŸ§","ğŸ¶","ğŸ±","ğŸ¹","ğŸ¦‹","ğŸ¦•"];

/* ================= State & DOM refs ================= */
let state={name:"",age:7,depth:40,lang:"en",avatar:AVATARS[0],seq:[],idx:0,answers:{},coins:0,skips:3,teacher:false,tts:false};
const $=s=>document.querySelector(s);
const conf=$("#confetti"), cctx=conf.getContext("2d");
const nameEl=$("#name"), ageEl=$("#age"), depthEl=$("#depth"), langEl=$("#lang");
const startBtn=$("#startBtn"), resumeBtn=$("#resumeBtn"), teacherView=$("#teacherView");
const intro=$("#intro"), stage=$("#stage"), results=$("#results");
const avatarEmojiTop=$("#avatarEmoji"), avatarNameTop=$("#avatarName");
const avatarEmojiStage=$("#avatarEmojiStage"), avatarNameStage=$("#avatarNameStage");
const avatarEmojiRes=$("#avatarEmojiRes"), avatarNameRes=$("#avatarNameRes");
const coinsTop=$("#coinsTop"), coinsStage=$("#coins"), coinsRes=$("#coinsRes");
const chip=$("#chip"), qcount=$("#qcount"), bar=$("#bar"), qtext=$("#qtext"), answersEl=$("#answers"), parallax=$("#parallax");
const backBtn=$("#backBtn"), skipBtn=$("#skipBtn"), saveBtn=$("#saveBtn"), nextBtn=$("#nextBtn"), skipsEl=$("#skips");
const radarCanvas=$("#radar"), topList=$("#topList"), summary=$("#summary"), quality=$("#quality"), teacherStats=$("#teacherStats");
const printBtn=$("#printBtn"), csvBtn=$("#csvBtn"), jsonBtn=$("#jsonBtn"), restartBtn=$("#restartBtn");
const ttsToggle=$("#ttsToggle"), ttsLabel=$("#ttsLabel"), ttsReplay=$("#ttsReplay");

/* ================= UI sounds ================= */
const Sounds=(()=>{
  let ctx; const ensure=()=>ctx||(ctx=new (window.AudioContext||window.webkitAudioContext)());
  function blip(f=600,d=0.07,type="sine",v=0.12){ensure();const t=ctx.currentTime,o=ctx.createOscillator(),g=ctx.createGain();o.type=type;o.frequency.value=f;g.gain.value=0;o.connect(g).connect(ctx.destination);g.gain.linearRampToValueAtTime(v,t+0.01);g.gain.exponentialRampToValueAtTime(0.0001,t+d);o.start(t);o.stop(t+d+0.02)}
  function coin(){ensure();const t=ctx.currentTime,o=ctx.createOscillator(),g=ctx.createGain();o.type="triangle";o.frequency.setValueAtTime(1200,t);o.frequency.exponentialRampToValueAtTime(2200,t+0.06);g.gain.setValueAtTime(0.001,t);g.gain.exponentialRampToValueAtTime(0.2,t+0.01);g.gain.exponentialRampToValueAtTime(0.001,t+0.25);o.connect(g).connect(ctx.destination);o.start(t);o.stop(t+0.3)}
  function success(){ensure();[[660,0.06],[880,0.08],[990,0.12]].forEach(([f,d],i)=>{const t=ctx.currentTime+i*0.07,o=ctx.createOscillator(),g=ctx.createGain();o.type="sine";o.frequency.value=f;g.gain.value=0;o.connect(g).connect(ctx.destination);g.gain.linearRampToValueAtTime(0.18,t+0.02);g.gain.exponentialRampToValueAtTime(0.0001,t+d);o.start(t);o.stop(t+d+0.02)})}
  return {blip,coin,success};
})();

/* ================= RNG ================= */
function xhash(str){let h=1779033703^str.length; for(let i=0;i<str.length;i++){h = Math.imul(h^str.charCodeAt(i),3432918353); h = (h<<13)|(h>>>19);} return (h>>>0);}
function mulberry32(a){return function(){let t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return ((t^t>>>14)>>>0)/4294967296;}}
function seededShuffle(arr, seed){ const rng = mulberry32(seed); const a=[...arr]; for(let i=a.length-1;i>0;i--){ const j=Math.floor(rng()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }

/* ================= Build sequence (anchors + extras) ================= */
function getBank(lang, age){ const pack=BANKS[lang] || BANKS.en; return age<=8?pack.YOUNG:pack.OLDER; }
function buildSeq(name, age, depth, lang){
  const per = DEPTH_MAP[depth]||3;
  const bank = getBank(lang, age);
  const anchorSeed = xhash(`A:${name}:${age}:${lang}`);
  const extraSeed  = xhash(`E:${name}:${age}:${lang}:${depth}`);

  const anchorBlocks = DOMAINS.map(d=>{
    const items = bank[d].slice(0, ANCHORS_PER_DOMAIN).map((t,idx)=>({id:`${d[0]}A${idx+1}`, d, t, anchor:true}));
    return seededShuffle(items, xhash(d)+anchorSeed);
  });
  const extrasNeeded = Math.max(0, per - ANCHORS_PER_DOMAIN);
  const extraBlocks = DOMAINS.map(d=>{
    const pool = bank[d].slice(ANCHORS_PER_DOMAIN).map((t,idx)=>({id:`${d[0]}E${idx+1}`, d, t, anchor:false}));
    const shuffled = seededShuffle(pool, xhash(d)+extraSeed);
    return shuffled.slice(0, extrasNeeded);
  });

  const combined = DOMAINS.map((_,i)=>[...anchorBlocks[i], ...extraBlocks[i]]);
  const seq=[];
  for(let r=0;r<ANCHORS_PER_DOMAIN;r++){ for(let i=0;i<combined.length;i++){ if(combined[i][r]) seq.push(combined[i][r]); } }
  for(let r=ANCHORS_PER_DOMAIN;r<per;r++){ for(let i=0;i<combined.length;i++){ if(combined[i][r]) seq.push(combined[i][r]); } }
  return seq;
}

/* ================= Theme ================= */
function themeFor(d){
  return {
    "Linguistic":{bg:"var(--L)", icons:["ğŸ“š","âœï¸","ğŸ”¤","ğŸ—£ï¸"]},
    "Logical-Mathematical":{bg:"var(--M)", icons:["ğŸ”¢","ğŸ§®","â™Ÿï¸","ğŸ§©"]},
    "Musical":{bg:"var(--MU)", icons:["ğŸµ","ğŸ¥","ğŸ¹","ğŸ§"]},
    "Spatial-Visual":{bg:"var(--S)", icons:["ğŸ¨","ğŸ§©","ğŸ—ºï¸","ğŸ§±"]},
    "Bodily-Kinesthetic":{bg:"var(--B)", icons:["ğŸ¤¸","ğŸƒ","ğŸ› ï¸","ğŸ¯"]},
    "Interpersonal":{bg:"var(--E)", icons:["ğŸ¤","ğŸ—¨ï¸","ğŸ‘¥","ğŸ’¬"]},
    "Intrapersonal":{bg:"var(--I)", icons:["ğŸ§ ","ğŸ“","ğŸ§˜","ğŸ¯"]},
    "Naturalistic":{bg:"var(--N)", icons:["ğŸŒ³","ğŸª¨","ğŸƒ","ğŸ¾"]}
  }[d];
}
function setStageTheme(d){
  const t=themeFor(d);
  $("#qwrap").style.background=`linear-gradient(180deg, ${t.bg}, #ffffff)`;
  parallax.innerHTML="";
  for(let i=0;i<6;i++){
    const el=document.createElement("div");
    el.className="picon"; el.textContent=t.icons[i%t.icons.length];
    el.style.left=(Math.random()*90+5)+"%"; el.style.top=(Math.random()*50+5)+"%";
    el.style.animationDelay=(Math.random()*6)+"s"; parallax.appendChild(el);
  }
}

/* ================= i18n apply ================= */
function applyI18N(){
  const T=I18N[state.lang]||I18N.en;
  document.querySelectorAll("[data-i18n]").forEach(el=>{
    const key=el.getAttribute("data-i18n"); if(typeof T[key]==="string") el.textContent=T[key];
  });
  document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
    const key=el.getAttribute("data-i18n-placeholder"); if(typeof T[key]==="string") el.placeholder=T[key];
  });
  $("#depth").querySelectorAll("option").forEach(opt=>{
    const key=opt.getAttribute("data-i18n"); if(key && T[key]) opt.textContent=T[key];
  });
  $("#ttsLabel").textContent = state.tts ? (T.ttsOn||"Speakingâ€¦") : (T.ttsOff||"Read Aloud");
}

/* ================= Avatars ================= */
function renderAvatars(){
  const wrap=$("#avatarWrap"); wrap.innerHTML="";
  AVATARS.forEach((emo,i)=>{
    const label=document.createElement("label");
    label.innerHTML=`<input type="radio" name="av" ${i===0?'checked':''}><span class="tile">${emo}</span>`;
    label.querySelector("input").addEventListener("change",()=>{state.avatar=emo; syncHeader(); Sounds.blip(660,0.06,"sine",0.08);});
    wrap.appendChild(label);
  });
}

/* ================= TTS ================= */
const TTS = (function(){
  const synth = window.speechSynthesis;
  let lastUtterances=[]; let currentLang="en";
  function getVoicesFor(lang){
    const vs = synth.getVoices();
    const prefs = { en:[/en(-|_)?(US|GB|AU|CA)/i,/en/i], zh:[/zh(-|_)?(CN|Hans)/i,/Chinese/i,/zh/i], es:[/es(-|_)?/i,/es/i], fr:[/fr(-|_)?/i,/fr/i] }[lang]||[/./];
    for(const rx of prefs){ const cand=vs.filter(v=>rx.test(v.lang)||rx.test(v.name)); if(cand.length) return cand; }
    return vs;
  }
  function rate(age){ if(age<=8) return 0.9; if(age<=12) return 1.0; return 1.05; }
  function speakChunks(chunks,{lang="en",age=8}={}){
    stop(); currentLang=lang;
    const voices=getVoicesFor(lang); const voice=voices[0]||null; const r=rate(age);
    lastUtterances=chunks.map(txt=>{ const u=new SpeechSynthesisUtterance(txt); u.lang=(voice&&voice.lang)||(lang==="zh"?"zh-CN":lang); if(voice) u.voice=voice; u.rate=r; u.pitch=1; u.volume=1; return u; });
    lastUtterances.forEach(u=>synth.speak(u));
  }
  function stop(){ try{ speechSynthesis.cancel(); }catch(e){} lastUtterances=[]; }
  function replay(){ if(!lastUtterances.length) return false; const texts=lastUtterances.map(u=>u.text); speakChunks(texts,{lang:currentLang,age:state.age}); return true; }
  if(synth && typeof synth.onvoiceschanged!=="undefined"){ synth.onvoiceschanged=()=>{}; }
  return {speakChunks, stop, replay};
})();

/* ================= Header sync ================= */
function syncHeader(){
  const nm=state.name||"";
  $("#avatarEmoji").textContent=$("#avatarEmojiStage").textContent=$("#avatarEmojiRes").textContent=state.avatar;
  $("#avatarName").textContent=$("#avatarNameStage").textContent=$("#avatarNameRes").textContent=nm;
  coinsTop.textContent=coinsStage.textContent=coinsRes.textContent=String(state.coins);
}

/* ================= Start / Resume / Language ================= */
$("#startBtn").addEventListener("click", ()=>{
  const nm=nameEl.value.trim(); const age=Number(ageEl.value||0); const depth=Number(depthEl.value||24);
  if(!nm){alert((I18N[state.lang]||I18N.en).namePH);return}
  if(age<5||age>16){alert("Please enter age 5â€“16.");return}
  state={...state,name:nm,age,depth,teacher:teacherView.checked,coins:0,skips:3,answers:{},idx:0};
  state.seq = buildSeq(nm, age, depth, state.lang);
  show(stage); hide(intro); syncHeader(); applyI18N(); renderQuestion(); Sounds.success();
});
$("#resumeBtn").addEventListener("click", ()=>{
  const s=JSON.parse(localStorage.getItem("mi_kids_save")||"null");
  if(!s){alert("No saved progress found.");return}
  state=s; show(stage); hide(intro); syncHeader(); applyI18N(); renderQuestion(); Sounds.success();
});
$("#lang").addEventListener("change", (e)=>{
  state.lang = e.target.value;
  if(state.name && state.age && state.depth){
    const prevAns=state.answers, prevIdx=state.idx;
    state.seq = buildSeq(state.name, state.age, state.depth, state.lang);
    state.answers={}; for(const it of state.seq){ if(prevAns[it.id]!=null) state.answers[it.id]=prevAns[it.id]; }
    state.idx=Math.min(prevIdx, state.seq.length-1);
  }
  applyI18N(); if(!stage.classList.contains("hidden")) renderQuestion(); renderResultsLocalizedBits();
});

/* TTS buttons */
ttsToggle.addEventListener("click", ()=>{ state.tts=!state.tts; applyI18N(); if(!state.tts) TTS.stop(); else speakCurrent(); });
ttsReplay.addEventListener("click", ()=>{ if(!speakCurrent(true)){ Sounds.blip(420,0.06,"sine",0.06);} });
document.addEventListener("keydown",(e)=>{ if(e.key.toLowerCase()==="r") speakCurrent(true); if(e.key.toLowerCase()==="m"){ state.tts=!state.tts; applyI18N(); if(!state.tts) TTS.stop(); else speakCurrent(); }});

/* ================= Question rendering ================= */
function cur(){return state.seq[state.idx]}
function setStage(d){
  const T=I18N[state.lang]||I18N.en;
  chip.textContent=`${ICON[d]} ${(T.domains?.[d]||d)}`;
  qcount.textContent=`${state.idx+1}/${state.seq.length}`;
  bar.style.width=`${Math.round(state.idx/state.seq.length*100)}%`;
  const theme=themeFor(d); $("#qwrap").style.background=`linear-gradient(180deg, ${theme.bg}, #ffffff)`; setStageTheme(d);
}
function renderQuestion(){
  const it=cur(); if(!it){finish(); return;}
  setStage(it.d);
  qtext.textContent=it.t;
  const T=I18N[state.lang]||I18N.en;
  answersEl.innerHTML="";
  (T.choices||I18N.en.choices).forEach((txt,i)=>{
    const lab=document.createElement("label");
    const inp=document.createElement("input"); inp.type="radio"; inp.name="ans"; inp.value=String(i);
    if(state.answers[it.id]===i) inp.checked=true;
    inp.addEventListener("change",()=>Sounds.blip(520+40*i,0.06,"square",0.06));
    lab.appendChild(inp); lab.appendChild(Object.assign(document.createElement("span"),{textContent:txt}));
    answersEl.appendChild(lab);
  });
  document.onkeydown=(e)=>{ if(["1","2","3","4"].includes(e.key)){ const idx=Number(e.key)-1; const radios=answersEl.querySelectorAll('input[name="ans"]'); if(radios[idx]){ radios[idx].checked=true; Sounds.blip(520+40*idx,0.06,"square",0.06); } } };
  skipsEl.textContent=String(state.skips); syncHeader();
  if(state.tts) speakCurrent();
}
function speakCurrent(){
  if(!state.tts) return false; const it=cur(); if(!it) return false;
  const T=I18N[state.lang]||I18N.en; const domain=(T.domains?.[it.d]||it.d); const choices=(T.choices||I18N.en.choices);
  const chunks=[`${domain}.`, it.t, `${choices[0]}.`, `${choices[1]}.`, `${choices[2]}.`, `${choices[3]}.`];
  TTS.stop(); TTS.speakChunks(chunks,{lang:state.lang,age:state.age}); return true;
}

/* ================= Nav & coins ================= */
function coinFloat(n){
  const t=document.querySelector(".top-right .coin-pill"); if(!t) return;
  const r=t.getBoundingClientRect(); const el=document.createElement("div"); el.className="coin-float"; el.textContent="ğŸª™ +"+n;
  el.style.left=(r.left+20)+"px"; el.style.top=(r.top-8)+"px"; document.body.appendChild(el); setTimeout(()=>el.remove(),800);
}
function addCoins(choiceIdx){ const add = SCORE[choiceIdx]>0 ? 1 : 0; if(add>0){ state.coins+=add; coinFloat(add); Sounds.coin(); syncHeader(); } }

backBtn.onclick=()=>{ TTS.stop(); if(state.idx>0){ state.idx--; renderQuestion(); } else { hide(stage); show(intro); } };
skipBtn.onclick=()=>{ TTS.stop(); if(state.skips>0){ state.skips--; skipsEl.textContent=String(state.skips); next(); } else alert("No skips left."); };
saveBtn.onclick=()=>{ TTS.stop(); localStorage.setItem("mi_kids_save", JSON.stringify(state)); alert("Saved!"); Sounds.blip(760,0.06,"sine",0.08); };
nextBtn.onclick=()=>{ if(saveAnswer()){ TTS.stop(); next(); } };

function saveAnswer(){
  const sel=answersEl.querySelector('input[name="ans"]:checked'); if(!sel){ alert("Please pick an answer."); return false; }
  const choice=Number(sel.value); const id=cur().id; const was=state.answers[id];
  state.answers[id]=choice; if(was===undefined) addCoins(choice);
  return true;
}
function next(){ if(state.idx<state.seq.length-1){ state.idx++; renderQuestion(); } else { finish(); } }

/* ================= Scoring ================= */
let _radar=null; window._radarChart=null;
function score(){
  const perDomain={}; for(const d of DOMAINS){ perDomain[d]={A:{sum:0,n:0},E:{sum:0,n:0},all:{sum:0,n:0}}; }
  state.seq.forEach(it=>{ const v=state.answers[it.id]; if(v==null) return; const s=SCORE[v]; const b=it.anchor?"A":"E"; perDomain[it.d][b].sum+=s; perDomain[it.d][b].n++; perDomain[it.d].all.sum+=s; perDomain[it.d].all.n++;});
  const norm={}, counts={};
  for(const d of DOMAINS){
    const A=perDomain[d].A, E=perDomain[d].E; const Amax=A.n*3, Emax=E.n*3;
    const Aperc = Amax? (A.sum/Amax)*100 : null; const Eperc = Emax? (E.sum/Emax)*100 : null;
    let sc=0;
    if(Aperc==null && Eperc==null) sc=0;
    else if(Aperc!=null && Eperc==null) sc=Aperc;
    else if(Aperc==null && Eperc!=null) sc=Eperc;
    else { const diff=Math.abs(Eperc-Aperc); let Eadj=Eperc; if(diff>25){ const overshoot=diff-25; const sign=Math.sign(Eperc-Aperc); Eadj = Eperc - sign*(overshoot*0.5); } sc = 0.6*Aperc + 0.4*Eadj; }
    norm[d]=Math.round(sc); counts[d]=perDomain[d].all.n;
  }
  return {norm,counts,perDomain};
}
function consistency(){
  let A=0,B=0,cA=0,cB=0; state.seq.forEach((it,i)=>{const v=state.answers[it.id]; if(v==null) return; const s=SCORE[v]; if(i%2){B+=s;cB++;} else {A+=s;cA++;}});
  if(cA<4||cB<4) return "â€”"; const rel=1-Math.abs(A/cA-B/cB)/3; return rel<0?"0.00":rel.toFixed(2);
}

/* ================= Results ================= */
function renderResultsLocalizedBits(){
  const T=I18N[state.lang]||I18N.en;
  summary.textContent=(T.resultsLine||I18N.en.resultsLine)(state.name||"");
  if(window._radarChart){
    window._radarChart.data.labels = DOMAINS.map(d=>ICON[d]+" "+(T.domains[d]||d));
    window._radarChart.update();
  }
}
function finish(){
  hide(stage); show(results); confettiBurst(150); Sounds.success(); TTS.stop();
  const {norm,counts,perDomain}=score(); const T=I18N[state.lang]||I18N.en;
  summary.textContent=(T.resultsLine||I18N.en.resultsLine)(state.name||"");
  const labels=DOMAINS.map(d=>ICON[d]+" "+(T.domains[d]||d)), data=DOMAINS.map(d=>norm[d]);
  if(_radar) _radar.destroy();
  _radar=new Chart(radarCanvas.getContext("2d"),{ type:"radar", data:{labels,datasets:[{label:"Profile",data,fill:true,pointRadius:3}]}, options:{scales:{r:{beginAtZero:true,max:100,ticks:{stepSize:20}}},plugins:{legend:{display:false}}}});
  window._radarChart=_radar;
  const top=[...DOMAINS].sort((a,b)=>norm[b]-norm[a]).slice(0,3); topList.innerHTML=""; top.forEach(d=>{const li=document.createElement("li"); li.textContent=`${ICON[d]} ${(T.domains[d]||d)} â€” ${norm[d]}/100`; topList.appendChild(li);});
  const consLabel = {en:"Response consistency", zh:"å›ç­”ä¸€è‡´æ€§", es:"Coherencia de respuestas", fr:"CohÃ©rence des rÃ©ponses"}[state.lang]||"Response consistency";
  const stabLabel = {en:"Anchorâ€“extra agreement", zh:"é”šé¢˜ä¸é™„åŠ é¢˜ä¸€è‡´æ€§", es:"Acuerdo anclasâ€“extras", fr:"Accord ancragesâ€“suppl."}[state.lang]||"Anchorâ€“extra agreement";
  const diverge = DOMAINS.map(d=>{ const A=perDomain[d].A,E=perDomain[d].E; if(!A.n||!E.n) return null; const Aperc=(A.sum/(A.n*3))*100, Eperc=(E.sum/(E.n*3))*100; const diff=Math.abs(Eperc-Aperc); return diff>25?`${(T.domains[d]||d)}â–³${Math.round(diff)}%`:null;}).filter(Boolean);
  quality.textContent=`${consLabel}: ${consistency()}   ${stabLabel}: ${diverge.length?diverge.join(" â€¢ "):"âœ“"}`;
  teacherStats.textContent = state.teacher ? `${({en:"Items per domain", zh:"æ¯ä¸ªç»´åº¦é¢˜é‡", es:"Ãtems por inteligencia", fr:"Items par domaine"}[state.lang]||"Items per domain")}: ` + DOMAINS.map(d=>`${(T.domains[d]||d)}:${counts[d]||0}`).join(" | ") : "";
  coinsRes.textContent=String(state.coins); syncHeader();
  printBtn.onclick=()=>window.print(); csvBtn.onclick=exportCSV; jsonBtn.onclick=exportJSON; restartBtn.onclick=()=>{ show(intro); hide(results); };
}

/* ================= Exports ================= */
function exportCSV(){ const {norm}=score(); const header=["Name","Age","Depth","Lang","Coins",...DOMAINS].join(","); const row=[state.name,state.age,state.depth,state.lang,state.coins,...DOMAINS.map(d=>norm[d])].join(","); download("mi_profile.csv",header+"\n"+row+"\n"); }
function exportJSON(){ download("mi_profile.json",JSON.stringify(state,null,2)); }
function download(fname,text){ const a=document.createElement("a"); a.href=URL.createObjectURL(new Blob([text],{type:"text/plain"})); a.download=fname; a.click(); URL.revokeObjectURL(a.href); }

/* ================= Confetti ================= */
function sizeCanvas(){conf.width=innerWidth; conf.height=innerHeight} sizeCanvas(); addEventListener("resize",sizeCanvas);
let puff=[]; let raf=null;
function confettiBurst(n=80){ for(let i=0;i<n;i++){puff.push({x:innerWidth/2,y:innerHeight/4,vx:(Math.random()-0.5)*7,vy:-Math.random()*6-2,g:0.15+Math.random()*0.05,r:2+Math.random()*3});} if(!raf) loop(); }
function loop(){ raf=requestAnimationFrame(loop); cctx.clearRect(0,0,conf.width,conf.height); puff.forEach(p=>{p.vy+=p.g; p.x+=p.vx; p.y+=p.vy; cctx.fillStyle=`hsl(${Math.random()*360},70%,60%)`; cctx.beginPath(); cctx.arc(p.x,p.y,p.r,0,Math.PI*2); cctx.fill();}); puff=puff.filter(p=>p.y<innerHeight+20); if(!puff.length){cancelAnimationFrame(raf); raf=null;}}

/* ================= Helpers ================= */
function show(el){el.classList.remove("hidden")} function hide(el){el.classList.add("hidden")}
function renderResultsLocalizedBits(){ const T=I18N[state.lang]||I18N.en; summary.textContent=(T.resultsLine||I18N.en.resultsLine)(state.name||""); if(window._radarChart){ window._radarChart.data.labels=DOMAINS.map(d=>ICON[d]+" "+(T.domains[d]||d)); window._radarChart.update(); } }

/* ================= Init ================= */
document.addEventListener("DOMContentLoaded",()=>{ renderAvatars(); syncHeader(); applyI18N(); });
</script>
</body>
</html>
